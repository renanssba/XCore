fade_out 0.5
bg "shopping"
fade_in 0.5


generate_date
set_var currentDateEvent 0
set_var date_success 0


say "" "\couple resolveram sair para se divertir."


waypoint new_event
if #currentDateEvent < #dateLength

waypoint start_interaction
goto_script "\currentEventName" event_statement
choices "Interferir (1AP)" ac_interfere "Ignorar" ac_continue

waypoint ac_interfere
if #ap < 1
  goto_script "not_enough_ap"
  goto start_interaction
endif

if #currentEventInteractionType == 0
  say "" "Qual a reação que \boy deve tomar?"
endif
if #currentEventInteractionType == 1
  say "" "Qual a reação que \girl deve tomar?"
endif
if #currentEventInteractionType == 2
  say "" "Qual a reação que \couple devem tomar?"
endif
choices "Valentia" sug_guts "Inteligência" sug_intelligence "Carisma" sug_charisma "Cancelar" start_interaction

waypoint sug_guts
set_var selected_attribute 0
goto suggestion

waypoint sug_intelligence
set_var selected_attribute 1
goto suggestion

waypoint sug_charisma
set_var selected_attribute 2
goto suggestion


waypoint suggestion
spend_ap 1
event_resolution selected_attribute
goto resolution




waypoint ac_continue
event_resolution


waypoint resolution
if resolution == 0
  goto_script "\currentEventName" guts_success
endif
if resolution == 1
  goto_script "\currentEventName" intelligence_success
endif
if resolution == 2
  goto_script "\currentEventName" charisma_success
endif
if resolution == 3
  goto_script "\currentEventName" guts_fail
endif
if resolution == 4
  goto_script "\currentEventName" intelligence_fail
endif
if resolution == 5
  goto_script "\currentEventName" charisma_fail
endif

if resolution < 3
  add_var date_success 1
  say "" "O casal superou o desafio!"
else
  say "" "O casal falhou neste desafio."
endif
add_var currentDateEvent 1
goto new_event

endif



waypoint end
if date_success >= 5
  say "O encontro acabou, e foi um grande sucesso!"
  say "\couple se tornaram um casal inseparável, e você sabe que eles terão filhos no futuro!"
  ship_couple
else
  say "O encontro acabou, e foi um fracasso!"
endif


fade_out 0.5
bg null
update_ui
fade_in 0.5

if date_success >= 5
  say "Fertiliel passou a observar o seu próximo casal da lista: \couple."
else
